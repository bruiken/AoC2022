print([(p:=True),(_:=open(0).readlines()),(b:=[i for(i,g)in zip(range(len(_)),_)if g[:2]==' 1'][0]),(k:=int(_[b].split(" ")[-2])),(s:=list(map(list,[''.join([_[j][1+4*i]for j in range(b)][::-1]).replace(" ","")for i in range(int(k))]))),[[exec(f's[{t-1}] += s[{f-1}][{-n}:][::-1 if p else 1];del s[{f-1}][{-n}:]',globals()),]for n,f,t in[map(int,l.split()[1::2])for l in _[b+2:]]],''.join(e[-1] for e in s)][6])